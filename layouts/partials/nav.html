<nav class="relative text-2xl xl:text-3xl 2xl:text-4xl uppercase tracking-tighter flex flex-col sm:flex-row items-center justify-between">
  <!-- Left: Logo -->
  <div class="group z-80">
    {{ $home := site.GetPage "home" }}
    <a href="{{ $home.RelPermalink }}" class="relative inline-block">
      <div class="flex space-x-2.5 items-center">
        <div class="-rotate-5 group-hover:rotate-0 transition-transform duration-200">Kuba</div>
        <div class="rotate-7 group-hover:rotate-0 transition-transform duration-200">Maria</div>
        <div class="-rotate-2 group-hover:rotate-0 transition-transform duration-200">Mazurkiewicz</div>
      </div>
      <span class="absolute left-0 bottom-0.75 w-full h-0.5 xl:h-0.75 bg-stone-900 dark:bg-gray-300 opacity-0 transition-opacity delay-200 group-hover:opacity-100"></span>
    </a>
  </div>

  <div class="group z-99999 mt-3 sm:mt-0">
  <!-- Right: MENU togge -->
  <button id="menu-toggle"
          class="lg:hidden uppercase tracking-tighter font-medium focus:outline-none relative
                 after:content-[''] after:absolute after:left-0 after:bottom-0 after:w-full after:h-0.5 after: dark:bg-stone-900 after:dark:bg-gray-300 after:opacity-0 hover:after:opacity-100 after:transition-opacity after:duration-0 z-50 leading-none cursor-pointer">
    MENU
  </button>

  <!-- Fullscreen menu overlay -->
  <ul id="menu"
      class="fixed inset-0 flex flex-col items-center justify-center 
             bg-white text-center opacity-0 invisible transition-all duration-100 ease-in-out
             lg:static lg:flex-row lg:space-y-0 lg:space-x-5 lg:bg-transparent lg:opacity-100 lg:visible dark:bg-stone-900">
    {{- $currentpage := . -}}
    {{- range .Site.Menus.main }}
      {{- if or ($currentpage.IsMenuCurrent "main" .) ($currentpage.HasMenuCurrent "main" .)}}
        <li><a href="{{ .URL | relLangURL }}" class="underline" style="text-underline-offset: 3px">{{ .Name }}</a></li>
      {{- else }}
        <li><a href="{{ .URL | relLangURL }}" class="hover:underline underline-offset-3 text-decoration-thickness:2px;">{{ .Name }}</a></li>
      {{- end }}
    {{- end }}

    <li>
      {{ range .Translations }}
        <a href="{{ .RelPermalink }}" hreflang="{{ .Lang }}" class="hover:underline underline-offset-3 text-decoration-thickness:2px;">{{ .Language.LanguageName }}</a>
      {{ end }}
    </li>
  </ul>
</div>
</nav>

{{ $lang := .Site.Language.Lang }}

<script>
(function() {
  const toggle = document.getElementById('menu-toggle');
  const menu = document.getElementById('menu');
  const lang = "{{ .Lang }}";
  let open = false;

  toggle.addEventListener('click', () => {
    open = !open;

    if (open) {
      // Show fullscreen overlay
      menu.classList.remove('opacity-0', 'invisible');
      menu.classList.add('opacity-100', 'visible');
      toggle.textContent = lang === "pl" ? "ZAMKNIJ" : "CLOSE";
      document.body.classList.add('overflow-hidden'); // prevent background scroll
    } else {
      // Hide fullscreen overlay
      menu.classList.add('opacity-0', 'invisible');
      menu.classList.remove('opacity-100', 'visible');
      toggle.textContent = 'MENU';
      document.body.classList.remove('overflow-hidden');
    }
  });
})();
</script>